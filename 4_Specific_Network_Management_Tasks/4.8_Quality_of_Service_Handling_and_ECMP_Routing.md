---
title: "4.8. QoS处理与ECMP路由"
anchor: "4.8_Quality_of_Service_Handling_and_ECMP_Routing"
weight: 408
rank: "h2"
---

网络中的所有QoS处理，例如基于差分服务码点（DSCPs，详见《[RFC2475](https://www.rfc-editor.org/info/rfc2475)》）和等价多路径（ECMP）路由，都应该是以流量为单位来起效的，因此所有属于同一条活跃QUIC连接的数据包都能得到统一的待遇。

使用ECMP经由多条网络路径或其他无法为同一连接的数据包提供均等待遇的途径来分发同一路流量中的数据包，会造成顺序、送达率和丢包率的浮动。
由于各个数据包的丢包和延误反馈都会被用作拥塞控制器的输入，所以这些浮动会严重影响性能。
根据所实现的丢包恢复机制，QUIC或许会比传统的TCP流量更能容忍数据包乱序（详见[第2.7章](#2.7_Packet_Numbers)）。
可是，为某路流量所用的恢复机制无法被网络侦知，因此对乱序的容忍度应该被视作未知。

注意，一条QUIC连接的五元组可能因为迁移而发生变化。
在这种情况下，在路径上会观察到多路流量，它们或许会被区别对待，而拥塞控制器通常会因迁移而被重置状态（详见[第3.5章](#3.5_Flow_Association)）。
